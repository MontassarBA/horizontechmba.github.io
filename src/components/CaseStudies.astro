---
import { getLangFromUrl, useTranslations, useTranslatedPath } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

// These represent the type of projects our founder has delivered during 15+ years of consulting experience
const caseStudies = [
  {
    id: 'aerospace-iot',
    title: lang === 'fr' ? 'Système IoT pour l\'Aérospatiale' : 'Aerospace IoT System',
    context: lang === 'fr' ? 'Secteur Aérospatiale' : 'Aerospace Sector',
    industry: lang === 'fr' ? 'Aérospatiale' : 'Aerospace',
    challenge: lang === 'fr' 
      ? 'Moderniser le système de monitoring en temps réel des équipements de test'
      : 'Modernize real-time monitoring system for test equipment',
    solution: lang === 'fr'
      ? 'Architecture IoT avec edge computing et tableau de bord temps réel'
      : 'IoT architecture with edge computing and real-time dashboard',
    results: [
      { metric: '40%', label: lang === 'fr' ? 'Réduction temps développement' : 'Development time reduction' },
      { metric: '99.9%', label: lang === 'fr' ? 'Disponibilité système' : 'System uptime' },
      { metric: '3x', label: lang === 'fr' ? 'Vitesse de diagnostic' : 'Diagnostic speed' }
    ],
    tags: ['IoT', 'Edge Computing', 'Real-time', 'Dashboard'],
    gradient: 'from-blue-500 to-primary-600'
  },
  {
    id: 'medical-embedded',
    title: lang === 'fr' ? 'Dispositif Médical Embarqué' : 'Medical Embedded Device',
    context: lang === 'fr' ? 'Secteur Santé' : 'Healthcare Sector',
    industry: lang === 'fr' ? 'Santé' : 'Healthcare',
    challenge: lang === 'fr'
      ? 'Développer un système embarqué certifié pour équipement de diagnostic'
      : 'Develop certified embedded system for diagnostic equipment',
    solution: lang === 'fr'
      ? 'Firmware temps réel avec architecture safety-critical et documentation FDA'
      : 'Real-time firmware with safety-critical architecture and FDA documentation',
    results: [
      { metric: '100%', label: lang === 'fr' ? 'Conformité FDA' : 'FDA Compliance' },
      { metric: '6', label: lang === 'fr' ? 'Mois de développement' : 'Months development' },
      { metric: '0', label: lang === 'fr' ? 'Défauts critiques' : 'Critical defects' }
    ],
    tags: ['Embedded', 'Medical', 'FDA', 'Safety-Critical'],
    gradient: 'from-red-500 to-pink-600'
  },
  {
    id: 'energy-ai',
    title: lang === 'fr' ? 'IA Prédictive pour l\'Énergie' : 'Predictive AI for Energy',
    context: lang === 'fr' ? 'Secteur Énergie' : 'Energy Sector',
    industry: lang === 'fr' ? 'Énergie' : 'Energy',
    challenge: lang === 'fr'
      ? 'Optimiser la maintenance prédictive des infrastructures énergétiques'
      : 'Optimize predictive maintenance for energy infrastructure',
    solution: lang === 'fr'
      ? 'Modèles ML pour prédiction de pannes avec intégration SCADA'
      : 'ML models for failure prediction with SCADA integration',
    results: [
      { metric: '35%', label: lang === 'fr' ? 'Réduction des pannes' : 'Failure reduction' },
      { metric: '$2M', label: lang === 'fr' ? 'Économies annuelles' : 'Annual savings' },
      { metric: '85%', label: lang === 'fr' ? 'Précision prédiction' : 'Prediction accuracy' }
    ],
    tags: ['AI/ML', 'Predictive', 'SCADA', 'Energy'],
    gradient: 'from-green-500 to-emerald-600'
  }
];

const sectionTitle = lang === 'fr' ? 'Types de Projets' : 'Types of Projects';
const sectionSubtitle = lang === 'fr'
  ? 'Exemples de projets réalisés par notre fondateur au cours de ses 15+ années d\'expérience'
  : 'Examples of projects delivered by our founder over 15+ years of experience';
const badge = lang === 'fr' ? 'Notre Expertise' : 'Our Expertise';
const viewAll = lang === 'fr' ? 'Voir tous les projets' : 'View all projects';
---

<section class="py-24 bg-gradient-to-b from-white to-gray-50/50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-16">
      <span class="inline-block px-4 py-2 bg-primary-100 text-primary-700 rounded-full text-sm font-semibold mb-4">
        {badge}
      </span>
      <h2 class="text-3xl md:text-5xl font-bold text-gray-900 mb-6">
        {sectionTitle}
      </h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        {sectionSubtitle}
      </p>
    </div>
    
    <!-- Case Studies -->
    <div class="space-y-8 max-w-6xl mx-auto">
      {caseStudies.map((study, index) => (
        <div 
          class={`group bg-white/70 backdrop-blur-lg rounded-3xl overflow-hidden shadow-lg shadow-black/5 border border-white/50 hover:shadow-2xl transition-all duration-500 ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`}
        >
          <div class="md:flex">
            <!-- Visual Side -->
            <div class={`md:w-2/5 bg-gradient-to-br ${study.gradient} p-8 md:p-12 flex flex-col justify-center relative overflow-hidden`}>
              <!-- Abstract decoration -->
              <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"></div>
              <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"></div>
              
              <div class="relative z-10">
                <span class="inline-block px-3 py-1 bg-white/20 text-white text-sm font-medium rounded-full mb-4">
                  {study.industry}
                </span>
                <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">
                  {study.title}
                </h3>
                <p class="text-white/80 font-medium">
                  {study.context}
                </p>
              </div>
            </div>
            
            <!-- Content Side -->
            <div class="md:w-3/5 p-8 md:p-12">
              <!-- Challenge & Solution -->
              <div class="space-y-6 mb-8">
                <div>
                  <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">
                    {lang === 'fr' ? 'Défi' : 'Challenge'}
                  </h4>
                  <p class="text-gray-700">{study.challenge}</p>
                </div>
                <div>
                  <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">
                    {lang === 'fr' ? 'Solution' : 'Solution'}
                  </h4>
                  <p class="text-gray-700">{study.solution}</p>
                </div>
              </div>
              
              <!-- Results -->
              <div class="grid grid-cols-3 gap-4 mb-8">
                {study.results.map((result) => (
                  <div class="text-center p-4 bg-gray-50/80 rounded-xl">
                    <p class="text-2xl md:text-3xl font-bold text-primary-600">{result.metric}</p>
                    <p class="text-xs text-gray-500 mt-1">{result.label}</p>
                  </div>
                ))}
              </div>
              
              <!-- Tags -->
              <div class="flex flex-wrap gap-2">
                {study.tags.map((tag) => (
                  <span class="px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full">
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
    
    <!-- CTA -->
    <div class="text-center mt-12">
      <a 
        href={translatePath('/contact')}
        class="inline-flex items-center gap-2 px-8 py-4 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl shadow-lg shadow-primary-500/25 hover:shadow-xl transition-all duration-300 group"
      >
        {lang === 'fr' ? 'Discuter de votre projet' : 'Discuss Your Project'}
        <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </a>
    </div>
  </div>
</section>
